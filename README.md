# beacon-appengine-cordova-demo
This repository contains code you can use to build a suite of demo apps, featuring Hybrid mobile apps that store and interact with beacon data and integrate with a Google app engine back end for persistence.

The demo suite is composed of three apps:

1) admin-app - a Cordova app that allows a user to configure a fleet of beacons and save them to persistent storage. Storage in this case is handled by Google app engine, with a Cloud Endpoint providing the api.

2) bbepoc - code that will be used to generate a Google Cloud Endpoint that will be used by the mobile apps to add, edit and retrieve beacon data. Note you'll need to create a new Google App Engine project and then copy this code in. Technically you only actually need the Beacon.java class, as the BeaconEndpoint class will be auto generated by the Google app engine plugin (at least this is how it works in Eclipse) but last time I checked the endpoint class was generated with a bug that prevented updating of existing records, the fix for which is included in my version of the endpoint class.

3) beacon-app - a Cordova app that will load any beacons added via the admin app. On encountering a beacon the app will display whatever message the user entered against the beacon in the admin app; this could obviously be extended to handle other types of interaction, such as showing an image or playing a video.

Please see the further instructions and known issues below before raising any issues against this repository.

*** You'll need to make changes in a few files before you can get up and running:

1) On lines 201 to 207 of /admin-app/www/index.html you'll find the following code block, which connects the app to the google app engine back-end:
	<script src="https://apis.google.com/js/client.js?onload=init">
    { "client": {},
      "googleapis.config": {
        root: "https://*** YOUR APP ID ***/_ah/api"
      }
    }
	</script>
You'll need to replace *** YOUR APP ID *** with the endpoint address that appengine provided when you deployed your back-end application (e.g. 'https://1-dot-my-supercool-service.appspot.com/_ah/api').

2) In the call to gapi.client.load on line 113 of /beacon-app/www/js/index.js, you'll need to replace *** YOUR APP ID *** in the following string 'https://*** YOUR APP ID ***.appspot.com/_ah/api' with the endpoint address that appengine provided when you deployed your back-end application (e.g. 'https://1-dot-my-supercool-service.appspot.com/_ah/api').

*** Known Issues:

Please note that this is a proof of concept demo that has been developed for instructional purposes only. There are some rough edges which mean that the software is not suitable for use in a production environment in its present form. No warranty is implied or should be inferred.

* You may find there is some lag in the UI while the app loads data from the back-end and renders it. A "loading" indicator would definitely be a good thing where this occurs, but I haven't implemented such functionality here.
* There's no validation on input fields, so inserting an incorrect value can cause problems - the admin app will allow you to save a beacon without supplying a UUID, major and minor, but the interactive beacon app will not scan for beacons if it loads such a beacon from the back-end.
